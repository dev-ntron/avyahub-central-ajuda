function toggleDarkMode() { document.body.classList.toggle('dark'); localStorage.setItem('darkMode', document.body.classList.contains('dark')); }
function toggleSidebar() { document.getElementById('sidebar').classList.toggle('open'); }
function toggleCategory(element) { const articles = element.nextElementSibling; const arrow = element.querySelector('span:last-child'); if (articles.style.display === 'none') { articles.style.display = 'block'; arrow.textContent = '▼'; } else { articles.style.display = 'none'; arrow.textContent = '▶'; } }
let searchTimeout;
function performSearch(query) { clearTimeout(searchTimeout); const resultsDiv = document.getElementById('searchResults'); if (query.length < 2) { resultsDiv.style.display = 'none'; return; } searchTimeout = setTimeout(() => { fetch(`/api/search.php?q=${encodeURIComponent(query)}`).then(response => response.json()).then(results => { if (results.length > 0) { resultsDiv.innerHTML = results.map(result => `<div class="search-result-item" onclick="window.location.href='/${result.slug}'"><strong>${result.title}</strong><br><small style="color: var(--secondary-color);">${result.category_name}</small></div>`).join(''); resultsDiv.style.display = 'block'; } else { resultsDiv.innerHTML = '<div class="search-result-item">Nenhum resultado encontrado</div>'; resultsDiv.style.display = 'block'; } }); }, 300); }
document.addEventListener('click', function(e) { const searchBox = document.querySelector('.search-box'); const resultsDiv = document.getElementById('searchResults'); if (!searchBox.contains(e.target)) { resultsDiv.style.display = 'none'; } });
if (localStorage.getItem('darkMode') === 'true') { document.body.classList.add('dark'); }
document.addEventListener('keydown', function(e) { if (e.ctrlKey && e.key === '/') { e.preventDefault(); document.querySelector('.search-input').focus(); } });